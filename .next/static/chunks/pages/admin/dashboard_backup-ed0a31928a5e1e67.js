(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1038],{5877:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard_backup",function(){return s(7270)}])},7270:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminDashboard}});var a=s(5893),r=s(7294);function AdminDashboard(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)("overview"),[i,l]=(0,r.useState)(!0),[d,o]=(0,r.useState)({}),[c,h]=(0,r.useState)([]),[x,u]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[p,b]=(0,r.useState)([]),[v,f]=(0,r.useState)([]),[j,w]=(0,r.useState)(""),[N,y]=(0,r.useState)(""),[C,A]=(0,r.useState)(""),[S,_]=(0,r.useState)(!1);async function loadAllData(){l(!0);try{var e,t;let s=await fetch("/api/admin/dummy/users"),a=await s.json(),r=await fetch("/api/admin/dummy/dealers"),n=await r.json(),i=await fetch("/api/admin/dummy/properties"),l=await i.json(),d=await fetch("/api/admin/dummy/pending"),c=await d.json();h(a||[]),u(n||[]),g(l||[]),b(c.pendingProperties||[]),f(c.pendingDealers||[]),o({users:a.length,dealers:n.length,properties:l.length,pending:((null===(e=c.pendingProperties)||void 0===e?void 0:e.length)||0)+((null===(t=c.pendingDealers)||void 0===t?void 0:t.length)||0)})}catch(e){console.error(e)}finally{l(!1)}}if((0,r.useEffect)(()=>{let e=localStorage.getItem("adminAuth");"true"===e?(t(!0),loadAllData()):window.location.href="/admin_login"},[]),!e)return(0,a.jsx)("div",{className:"p-10 text-center text-gray-500",children:"Checking Admin..."});if(i)return(0,a.jsx)("div",{className:"p-10 text-center text-gray-500",children:"Loading Dashboard..."});let D=Array.isArray(c)?c.filter(e=>(e.name||"").toLowerCase().includes(j.toLowerCase())):[],k=Array.isArray(x)?x.filter(e=>(e.name||"").toLowerCase().includes(N.toLowerCase())):[];return Array.isArray(m)&&m.filter(e=>(e.title||"").toLowerCase().includes(C.toLowerCase())),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-blue-600 text-white p-4 flex justify-between items-center shadow-md",children:[(0,a.jsx)("h1",{className:"font-bold text-xl",children:"Admin Panel"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:loadAllData,className:"bg-white text-blue-600 px-3 py-1 rounded hover:bg-gray-100 transition",children:"Refresh"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("adminAuth"),window.location.href="/admin_login"},className:"bg-red-500 px-3 py-1 rounded hover:bg-red-600 transition",children:"Logout"}),(0,a.jsx)("button",{className:"md:hidden bg-white px-2 py-1 rounded",onClick:()=>_(!S),children:"â˜°"})]})]}),(0,a.jsxs)("div",{className:"flex flex-1",children:[(S||window.innerWidth>=768)&&(0,a.jsx)("aside",{className:"bg-white w-64 p-4 border-r hidden md:block md:flex flex-col gap-3",children:["overview","users","dealers","properties","pending","settings"].map(e=>(0,a.jsx)("button",{className:"text-left px-3 py-2 rounded font-semibold ".concat(s===e?"bg-blue-500 text-white":"hover:bg-gray-100"),onClick:()=>{n(e),_(!1)},children:e.toUpperCase()},e))}),(0,a.jsxs)("main",{className:"flex-1 p-5",children:["overview"===s&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["users","dealers","properties","pending"].map(e=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded shadow hover:shadow-md transition text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:d[e]}),(0,a.jsx)("div",{className:"text-gray-600 mt-2",children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))}),"users"===s&&(0,a.jsxs)("div",{className:"bg-white p-5 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3",children:"All Users"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:j,onChange:e=>w(e.target.value),className:"flex-1 border p-2 rounded"}),(0,a.jsx)("button",{onClick:()=>w(""),className:"bg-gray-200 px-3 rounded hover:bg-gray-300 transition",children:"Clear"})]}),D.map(e=>(0,a.jsxs)("div",{className:"flex justify-between p-3 border-b hover:bg-gray-50 transition",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\uD83D\uDCDE ",e.phone||"-"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"bg-blue-500 text-white px-3 rounded hover:bg-blue-600 transition",children:"Toggle"}),(0,a.jsx)("button",{className:"bg-red-500 text-white px-3 rounded hover:bg-red-600 transition",children:"Delete"})]})]},e._id))]}),"dealers"===s&&(0,a.jsxs)("div",{className:"bg-white p-5 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3",children:"Dealers"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search dealers...",value:N,onChange:e=>y(e.target.value),className:"flex-1 border p-2 rounded"}),(0,a.jsx)("button",{onClick:()=>y(""),className:"bg-gray-200 px-3 rounded hover:bg-gray-300 transition",children:"Clear"})]}),k.map(e=>(0,a.jsxs)("div",{className:"flex justify-between p-3 border-b hover:bg-gray-50 transition",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.city})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"bg-blue-500 text-white px-3 rounded hover:bg-blue-600 transition",children:"Approve"}),(0,a.jsx)("button",{className:"bg-orange-500 text-white px-3 rounded hover:bg-orange-600 transition",children:"Reject"}),(0,a.jsx)("button",{className:"bg-red-500 text-white px-3 rounded hover:bg-red-600 transition",children:"Delete"})]})]},e._id))]})]})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=5877)}),_N_E=e.O()}]);
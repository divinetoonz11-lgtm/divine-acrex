(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7862],{7812:function(e,i,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dealer/add-property",function(){return r(4216)}])},4216:function(e,i,r){"use strict";r.r(i),r.d(i,{default:function(){return DealerAddProperty}});var n=r(5893),t=r(7294),l=r(1664),o=r.n(l),a=r(1163),s=r.n(a);function DealerAddProperty(){let[e,i]=(0,t.useState)({ownerName:"",postedBy:"",mobile:"",status:"Active",propertyType:"",bhk:"",price:"",area:"",furnishing:"",age:"",city:"",locality:"",address:"",description:""}),[r,l]=(0,t.useState)([]),[a,g]=(0,t.useState)([]),[u,x]=(0,t.useState)([]),[y,m]=(0,t.useState)(null),[f,j]=(0,t.useState)(""),[b,v]=(0,t.useState)(!1);function handleChange(e){let{name:r,value:n}=e.target;i(e=>({...e,[r]:n}))}async function handleSubmit(i){if(i.preventDefault(),j(""),!e.ownerName||!e.mobile||!e.city||!e.price){j("Please fill required fields: Name, Mobile, City, Price.");return}v(!0);try{let i="/images/listing-placeholder.png";u.length>0&&(i=u[0].src);let n={ownerName:e.ownerName,postedBy:e.postedBy,mobile:e.mobile,status:e.status,propertyType:e.propertyType,bhk:e.bhk,price:Number(e.price)||0,area:Number(e.area)||0,furnishing:e.furnishing,age:e.age,city:e.city,locality:e.locality,address:e.address,description:e.description,amenities:r,featured:!1,image:i,meta:{photosCount:a.length,hasVideo:!!y}},t=await fetch("/api/properties",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),l=await t.json();if(!t.ok)throw Error((null==l?void 0:l.message)||"Server error");j("Property posted successfully."),setTimeout(()=>s().push("/dealer/dashboard"),800)}catch(e){console.error(e),j("Failed to post property. Try again.")}finally{v(!1)}}let C="#eaf2ff";return(0,n.jsx)("div",{style:{minHeight:"100vh",fontFamily:"Inter, sans-serif",background:"#f5f7fb",paddingBottom:60},children:(0,n.jsxs)("div",{style:{maxWidth:1100,margin:"18px auto",padding:18},children:[(0,n.jsxs)("div",{style:{padding:18,borderRadius:10,background:"linear-gradient(90deg, ".concat("#2b6ef6",", #4aa3ff)"),color:"#fff",marginBottom:18},children:[(0,n.jsx)("div",{style:{fontSize:22,fontWeight:800},children:"Free Listing"}),(0,n.jsx)("div",{style:{marginTop:6},children:"Post property easily — 5–8 photos recommended"})]}),(0,n.jsxs)("form",{onSubmit:handleSubmit,children:[(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Basic Information"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Owner / Dealer Name *"}),(0,n.jsx)("input",{name:"ownerName",value:e.ownerName,onChange:handleChange,style:{...c,background:C},placeholder:"Full name"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Posted By *"}),(0,n.jsxs)("select",{name:"postedBy",value:e.postedBy,onChange:handleChange,style:{...c,background:C},children:[(0,n.jsx)("option",{value:"",children:"Select"}),(0,n.jsx)("option",{children:"Owner"}),(0,n.jsx)("option",{children:"Dealer"}),(0,n.jsx)("option",{children:"Broker"}),(0,n.jsx)("option",{children:"Builder"}),(0,n.jsx)("option",{children:"Other"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Mobile Number *"}),(0,n.jsx)("input",{name:"mobile",value:e.mobile,onChange:handleChange,style:{...c,background:C},placeholder:"e.g. 9876543210"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Status"}),(0,n.jsxs)("select",{name:"status",value:e.status,onChange:handleChange,style:{...c,background:C},children:[(0,n.jsx)("option",{children:"Active"}),(0,n.jsx)("option",{children:"Pending"}),(0,n.jsx)("option",{children:"Draft"}),(0,n.jsx)("option",{children:"Sold"}),(0,n.jsx)("option",{children:"Other"})]})]})]})]}),(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Property Details"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Property Type"}),(0,n.jsxs)("select",{name:"propertyType",value:e.propertyType,onChange:handleChange,style:{...c,background:C},children:[(0,n.jsx)("option",{value:"",children:"Select"}),(0,n.jsx)("option",{children:"Apartment"}),(0,n.jsx)("option",{children:"Independent Floor"}),(0,n.jsx)("option",{children:"Villa / House"}),(0,n.jsx)("option",{children:"Plot / Land"}),(0,n.jsx)("option",{children:"Shop / Commercial"}),(0,n.jsx)("option",{children:"Office Space"}),(0,n.jsx)("option",{children:"Builder Floor"}),(0,n.jsx)("option",{children:"Farm House"}),(0,n.jsx)("option",{children:"Other"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Bedrooms (BHK)"}),(0,n.jsxs)("select",{name:"bhk",value:e.bhk,onChange:handleChange,style:{...c,background:C},children:[(0,n.jsx)("option",{value:"",children:"Select"}),(0,n.jsx)("option",{children:"1 BHK"}),(0,n.jsx)("option",{children:"2 BHK"}),(0,n.jsx)("option",{children:"3 BHK"}),(0,n.jsx)("option",{children:"4 BHK"}),(0,n.jsx)("option",{children:"5+ BHK"}),(0,n.jsx)("option",{children:"Other"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Price (₹)"}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)("input",{type:"number",name:"price",value:e.price,onChange:handleChange,style:{...c,background:C,width:"100%"},placeholder:"e.g. 4500000"}),(0,n.jsxs)("select",{name:"priceUnit",onChange:handleChange,style:{...c,background:C,width:120},children:[(0,n.jsx)("option",{value:"INR",children:"INR"}),(0,n.jsx)("option",{value:"LAKH",children:"Lakh"}),(0,n.jsx)("option",{value:"CRORE",children:"Crore"}),(0,n.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Area (sq.ft.)"}),(0,n.jsx)("input",{type:"number",name:"area",value:e.area,onChange:handleChange,style:{...c,background:C},placeholder:"e.g. 1200"})]})]})]}),(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Location"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"City *"}),(0,n.jsx)("input",{name:"city",value:e.city,onChange:handleChange,style:{...c,background:C},placeholder:"City / locality"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:d,children:"Locality"}),(0,n.jsx)("input",{name:"locality",value:e.locality,onChange:handleChange,style:{...c,background:C},placeholder:"Locality / Area"})]})]}),(0,n.jsxs)("div",{style:{marginTop:12},children:[(0,n.jsx)("label",{style:d,children:"Full Address"}),(0,n.jsx)("textarea",{name:"address",value:e.address,onChange:handleChange,style:{...c,background:C,height:80},placeholder:"Full address"})]})]}),(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Amenities"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:["Parking","Lift / Elevator","24x7 Security","CCTV","Gym","Power Backup","Swimming Pool","Garden","Club House","Internet","Kids Play Area","Piped Gas","Intercom","Balcony","Fire Safety","Visitor Parking","Servant Room","Other"].map(e=>{let i=r.includes(e);return(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,padding:8,borderRadius:8,cursor:"pointer",background:i?"rgba(43,110,246,0.06)":"#f7fbff",border:i?"1px solid rgba(43,110,246,0.12)":"1px solid transparent"},children:[(0,n.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{l(i=>i.includes(e)?i.filter(i=>i!==e):[...i,e])}}),(0,n.jsx)("span",{style:{fontSize:14},children:e})]},e)})})]}),(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Photos & Video"}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsxs)("label",{style:d,children:["Photos (Max ",8,")"]}),(0,n.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:function(e){let i=Array.from(e.target.files||[]);if(i.length+a.length>8){j("You can upload up to ".concat(8," photos."));return}g(e=>[...e,...i]),i.forEach(e=>{let i=new FileReader;i.onload=e=>x(i=>[...i,{id:Date.now()+Math.random(),src:e.target.result}]),i.readAsDataURL(e)}),j("")}}),(0,n.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:["Upload up to ",8," images. Thumbnails will show below."]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:u.map((e,i)=>(0,n.jsxs)("div",{style:{width:96,height:72,borderRadius:8,overflow:"hidden",position:"relative",border:"1px solid #e6eefb"},children:[(0,n.jsx)("img",{src:e.src,alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,n.jsx)("button",{type:"button",onClick:()=>{g(e=>e.filter((e,r)=>r!==i)),x(e=>e.filter((e,r)=>r!==i))},style:{position:"absolute",right:6,top:6,background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",borderRadius:6,padding:"2px 6px",cursor:"pointer"},children:"x"})]},e.id))}),(0,n.jsxs)("div",{style:{marginTop:6},children:[(0,n.jsxs)("label",{style:d,children:["Video (Max ",5," MB)"]}),(0,n.jsx)("input",{type:"file",accept:"video/*",onChange:function(e){let i=e.target.files[0];if(!i)return;let r=i.size/1048576;if(r>5){j("Video too large. Max ".concat(5," MB allowed."));return}m(i),j("")}}),(0,n.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:["Single video recommended. Max ",5," MB."]})]})]}),(0,n.jsxs)("div",{style:{background:"#fff",padding:14,borderRadius:10,marginBottom:14},children:[(0,n.jsx)("h3",{style:{margin:0,marginBottom:10,color:"#0a2458"},children:"Description"}),(0,n.jsx)("textarea",{name:"description",value:e.description,onChange:handleChange,style:{...c,background:C,height:110},placeholder:"Short description, amenities, possession status etc."}),(0,n.jsxs)("div",{style:{marginTop:12,display:"flex",gap:12},children:[(0,n.jsx)("button",{type:"submit",disabled:b,style:{...h},children:b?"Saving...":"Post Property"}),(0,n.jsx)(o(),{href:"/dealer/dashboard",children:(0,n.jsx)("a",{style:{...p},children:"Cancel"})})]}),f&&(0,n.jsx)("div",{style:{marginTop:12,color:"#0b63d6"},children:f})]})]})]})})}let d={display:"block",marginBottom:6,fontSize:13,color:"#243b53",fontWeight:700},c={width:"100%",padding:"10px 12px",borderRadius:8,border:"1px solid #dfe9fb",fontSize:14,boxSizing:"border-box"},h={background:"#315DFF",color:"#fff",padding:"10px 16px",borderRadius:8,border:"none",fontWeight:"700",cursor:"pointer",marginRight:"10px"},p={background:"#fff",border:"1px solid #dce3ee",padding:"10px 16px",borderRadius:8,cursor:"pointer"}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=7812)}),_N_E=e.O()}]);
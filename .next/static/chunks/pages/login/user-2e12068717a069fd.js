(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{464:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/user",function(){return n(9155)}])},9155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return UserLogin}});var a=n(5893),r=n(7294),i=n(1163),o=n(5784);function UserLogin(){let e=(0,i.useRouter)(),[t,n]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1);async function loginEmail(n){if(n.preventDefault(),!t||!c)return alert("Enter email & password");try{v(!0);let n=await (0,o.Ry)(t,c);localStorage.setItem("logged_in","yes"),localStorage.setItem("role","user"),localStorage.setItem("user_email",n.user.email),window.dispatchEvent(new Event("authChanged")),e.push("/user/dashboard")}catch(e){alert("Login failed: "+e.message)}finally{v(!1)}}async function loginGoogle(){try{v(!0);let t=await (0,o.TX)();localStorage.setItem("logged_in","yes"),localStorage.setItem("role","user"),localStorage.setItem("user_email",t.user.email),t.user.photoURL&&localStorage.setItem("user_avatar",t.user.photoURL),t.user.displayName&&localStorage.setItem("user_name",t.user.displayName),window.dispatchEvent(new Event("authChanged")),e.push("/user/dashboard")}catch(e){alert("Google login failed: "+e.message)}finally{v(!1)}}async function sendOTP(){if(!d)return alert("Enter phone number");try{v(!0),(0,o.hQ)("recaptcha-user");let e=await (0,o.p4)(d);w(e),m(!0),alert("OTP Sent")}catch(e){alert("OTP failed: "+e.message)}finally{v(!1)}}async function verifyOTP(){if(g&&y)try{v(!0);let t=await y.confirm(g);localStorage.setItem("logged_in","yes"),localStorage.setItem("role","user"),localStorage.setItem("user_phone",t.user.phoneNumber||""),window.dispatchEvent(new Event("authChanged")),e.push("/user/dashboard")}catch(e){alert("Wrong OTP")}finally{v(!1)}}return(0,a.jsxs)("div",{style:{maxWidth:420,margin:"40px auto",padding:20,background:"#fff",borderRadius:12,boxShadow:"0 6px 20px rgba(0,0,0,0.08)"},children:[(0,a.jsx)("h2",{style:{fontSize:26,fontWeight:700,marginBottom:12},children:"User Login"}),(0,a.jsxs)("form",{onSubmit:loginEmail,children:[(0,a.jsx)("input",{style:l,type:"email",placeholder:"Email",value:t,onChange:e=>n(e.target.value)}),(0,a.jsx)("input",{style:l,type:"password",placeholder:"Password",value:c,onChange:e=>u(e.target.value)}),(0,a.jsx)("button",{style:s,disabled:b,children:"Login with Email"})]}),(0,a.jsx)("div",{style:{textAlign:"center",margin:"18px 0"},children:"\xe2€” OR \xe2€”"}),(0,a.jsx)("button",{style:{...s,background:"#de5246"},onClick:loginGoogle,disabled:b,children:"Login with Google"}),(0,a.jsx)("div",{style:{textAlign:"center",margin:"18px 0"},children:"\xe2€” OR \xe2€”"}),f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{style:l,type:"text",placeholder:"Enter OTP",value:g,onChange:e=>p(e.target.value)}),(0,a.jsx)("button",{style:s,onClick:verifyOTP,disabled:b,children:"Verify OTP"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{style:l,type:"text",placeholder:"Phone Number",value:d,onChange:e=>h(e.target.value)}),(0,a.jsx)("div",{id:"recaptcha-user"}),(0,a.jsx)("button",{style:s,onClick:sendOTP,disabled:b,children:"Send OTP"})]})]})}let l={width:"100%",padding:12,border:"1px solid #ccc",borderRadius:8,marginBottom:12},s={width:"100%",padding:14,background:"#6b21a8",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600}},5784:function(e,t,n){"use strict";let a;n.d(t,{I8:function(){return l},Ry:function(){return signInWithEmail},TX:function(){return signInWithGooglePopup},hQ:function(){return makeRecaptcha},p4:function(){return sendOtpToPhone}});var r=n(3977),i=n(9828),o=n(6813);a=(0,r.C6)().length?(0,r.C6)()[0]:(0,r.ZF)({apiKey:"AIzaSyDqZGmYIFC3TmP9JHKjiFKyq0mC9ctF0fI",authDomain:"divine99acres.firebaseapp.com",projectId:"divine99acres",storageBucket:"divine99acres.firebasestorage.app",messagingSenderId:"59931166918",appId:"1:59931166918:web:9ec80ad600b2b47c446fc7"});let l=(0,o.v0)(a);(0,i.ad)(a);let s=new o.hJ;async function signInWithGooglePopup(){return(0,o.rh)(l,s)}async function signInWithEmail(e,t){return(0,o.e5)(l,e,t)}function makeRecaptcha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"recaptcha-container",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"invisible";if(window.recaptchaVerifier)return window.recaptchaVerifier;let n=new o.lI(e,{size:t},l);return window.recaptchaVerifier=n,n}async function sendOtpToPhone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recaptcha-container",n=makeRecaptcha(t);if(!n)throw Error("reCAPTCHA not available in this environment");return await n.render(),(0,o.$g)(l,e,n)}}},function(e){e.O(0,[5703,1425,705,9774,2888,179],function(){return e(e.s=464)}),_N_E=e.O()}]);
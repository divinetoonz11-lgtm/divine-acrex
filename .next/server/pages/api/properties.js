"use strict";(()=>{var e={};e.id=2595,e.ids=[2595],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},464:(e,t,a)=>{a.r(t),a.d(t,{config:()=>u,default:()=>l,routeModule:()=>p});var r={};a.r(r),a.d(r,{default:()=>handler});var i=a(1802),o=a(7153),s=a(6249),n=a(402);let d="0"!==process.env.USE_DEMO;async function handler(e,t){let{method:a}=e;if(d){let r=global._demoProperties;if("GET"===a)return t.json({ok:!0,data:r});if("POST"===a){let a={id:"p"+Date.now(),featured:!1,status:"active",...e.body};return r.unshift(a),t.json({ok:!0,data:a})}return t.status(405).json({ok:!1,message:"Method not allowed"})}try{let r=await n.Z,i=r.db("divine_db"),o=i.collection("properties");if("GET"===a){let e=await o.find({}).sort({_id:-1}).toArray();return t.json({ok:!0,data:e})}if("POST"===a){let a={...e.body,createdAt:new Date,featured:e.body.featured||!1},r=await o.insertOne(a),i=await o.findOne({_id:r.insertedId});return t.json({ok:!0,data:i})}return t.status(405).json({ok:!1,message:"Method not allowed"})}catch(e){return console.error("DB ERROR:",e),t.status(500).json({ok:!1,message:"Server error"})}}d&&!global._demoProperties&&(global._demoProperties=[{id:"p1",title:"Luxurious Apartment",price:54e5,bhk:2,area:950,location:"South Ex",image:"/images/listing-example-1.png",status:"active",featured:!1},{id:"p2",title:"Modern Flat",price:72e5,bhk:3,area:1200,location:"Connaught Place",image:"/images/listing-example-2.png",status:"active",featured:!0},{id:"p3",title:"Cozy Studio",price:32e5,bhk:1,area:420,location:"Karol Bagh",image:"/images/listing-example-3.png",status:"draft",featured:!1}]);let l=(0,s.l)(r,"default"),u=(0,s.l)(r,"config"),p=new i.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/properties",pathname:"/api/properties",bundlePath:"",filename:""},userland:r})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[4222,402],()=>__webpack_exec__(464));module.exports=a})();
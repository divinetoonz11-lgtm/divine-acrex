"use strict";(()=>{var e={};e.id=7810,e.ids=[7810],e.modules={8013:e=>{e.exports=require("mongodb")},1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3864:(e,t,a)=>{a.r(t),a.d(t,{config:()=>p,default:()=>u,routeModule:()=>g});var i={};a.r(i),a.d(i,{default:()=>handler});var o=a(1802),s=a(7153),r=a(6249),n=a(402),d=a(8013);let l="0"!==process.env.USE_DEMO;async function handler(e,t){let{method:a}=e,{id:i}=e.query;if(!i)return t.status(400).json({ok:!1,message:"ID required"});if(l){let o=global._demoProperties,s=o.findIndex(e=>e.id===i);return -1===s?t.status(404).json({ok:!1,message:"Not found"}):"GET"===a?t.json({ok:!0,data:o[s]}):"PUT"===a?(o[s]={...o[s],...e.body},t.json({ok:!0,data:o[s]})):"DELETE"===a?(o.splice(s,1),t.json({ok:!0,message:"Deleted"})):t.status(405).json({ok:!1,message:"Not allowed"})}try{let o;let s=await n.Z,r=s.db("divine_db"),l=r.collection("properties");try{o=new d.ObjectId(i)}catch(e){return t.status(400).json({ok:!1,message:"Invalid ID"})}if("GET"===a){let e=await l.findOne({_id:o});if(!e)return t.status(404).json({ok:!1,message:"Not found"});return t.json({ok:!0,data:e})}if("PUT"===a){await l.updateOne({_id:o},{$set:e.body});let a=await l.findOne({_id:o});return t.json({ok:!0,data:a})}if("DELETE"===a){let e=await l.deleteOne({_id:o});if(0===e.deletedCount)return t.status(404).json({ok:!1,message:"Not found"});return t.json({ok:!0,message:"Deleted"})}return t.status(405).json({ok:!1,message:"Not allowed"})}catch(e){return console.error("PROPERTIES [id] ERROR:",e),t.status(500).json({ok:!1,message:"Server error"})}}l&&!global._demoProperties&&(global._demoProperties=[{id:"p1",title:"Luxurious Apartment",price:54e5,bhk:2,area:950,location:"South Ex",image:"/images/listing-example-1.png",status:"active",featured:!1},{id:"p2",title:"Modern Flat",price:72e5,bhk:3,area:1200,location:"Connaught Place",image:"/images/listing-example-2.png",status:"active",featured:!0},{id:"p3",title:"Cozy Studio",price:32e5,bhk:1,area:420,location:"Karol Bagh",image:"/images/listing-example-3.png",status:"draft",featured:!1},{id:"p4",title:"Family Home",price:9e6,bhk:4,area:1800,location:"Noida",image:"/images/listing-example-4.png",status:"active",featured:!0},{id:"p5",title:"Townhouse",price:45e5,bhk:2,area:1e3,location:"Gurgaon",image:"/images/listing-example-5.png",status:"active",featured:!1},{id:"p6",title:"Penthouse",price:15e6,bhk:4,area:2600,location:"DLF",image:"/images/listing-example-6.png",status:"active",featured:!1}]);let u=(0,r.l)(i,"default"),p=(0,r.l)(i,"config"),g=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/properties/[id]",pathname:"/api/properties/[id]",bundlePath:"",filename:""},userland:i})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[4222,402],()=>__webpack_exec__(3864));module.exports=a})();
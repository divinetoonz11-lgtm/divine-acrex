"use strict";(()=>{var e={};e.id=6624,e.ids=[6624],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6122:(e,n,o)=>{o.r(n),o.d(n,{config:()=>u,default:()=>l,routeModule:()=>d});var r={};o.r(r),o.d(r,{default:()=>handler});var s=o(1802),t=o(7153),a=o(6249),i=o(3808),c=o(6565);async function handler(e,n){if(await (0,i.Z)(),"GET"!==e.method)return n.status(405).json({success:!1,message:"Only GET request allowed"});try{let e=await c.Z.find({}).sort({createdAt:-1}).select("name email phone role active createdAt");return n.status(200).json({success:!0,users:e})}catch(e){return console.error("ADMIN USERS GET ERROR:",e),n.status(500).json({success:!1,message:"Server error"})}}let l=(0,a.l)(r,"default"),u=(0,a.l)(r,"config"),d=new s.PagesAPIRouteModule({definition:{kind:t.x.PAGES_API,page:"/api/admin/users/get",pathname:"/api/admin/users/get",bundlePath:"",filename:""},userland:r})},3808:(e,n,o)=>{o.d(n,{Z:()=>i});var r=o(1185),s=o.n(r);let t=process.env.MONGODB_URI||"mongodb://localhost:27017/divine_acres";if(!t)throw Error("⛔ MONGODB_URI is missing in environment variables");let a=global.mongoose;async function dbConnect(){return a.conn||(a.promise||(a.promise=s().connect(t,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(e=>(console.log("✅ MongoDB Connected"),e)).catch(e=>{console.error("❌ MongoDB Connection Error:",e)})),a.conn=await a.promise),a.conn}a||(a=global.mongoose={conn:null,promise:null});let i=dbConnect}};var n=require("../../../../webpack-api-runtime.js");n.C(e);var __webpack_exec__=e=>n(n.s=e),o=n.X(0,[4222,6565],()=>__webpack_exec__(6122));module.exports=o})();
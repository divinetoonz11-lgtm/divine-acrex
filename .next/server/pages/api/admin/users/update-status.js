"use strict";(()=>{var e={};e.id=4449,e.ids=[4449],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5860:(e,s,n)=>{n.r(s),n.d(s,{config:()=>d,default:()=>l,routeModule:()=>m});var o={};n.r(o),n.d(o,{default:()=>handler});var r=n(1802),t=n(7153),a=n(6249),i=n(3808),u=n(6565),c=n(1185);async function handler(e,s){try{if(await (0,i.Z)(),"POST"!==e.method)return s.status(405).json({success:!1,message:"Only POST allowed"});let{userId:n,active:o}=e.body;if(!n)return s.status(400).json({success:!1,message:"User ID missing"});if(!c.Types.ObjectId.isValid(n))return s.status(400).json({success:!1,message:"Invalid User ID"});let r=await u.Z.findByIdAndUpdate(n,{active:o},{new:!0}).lean();if(!r)return s.status(404).json({success:!1,message:"User not found"});return s.status(200).json({success:!0,message:o?"User Activated":"User Blocked",user:r})}catch(e){return console.error("USER STATUS ERROR:",e),s.status(500).json({success:!1,message:"Server error"})}}let l=(0,a.l)(o,"default"),d=(0,a.l)(o,"config"),m=new r.PagesAPIRouteModule({definition:{kind:t.x.PAGES_API,page:"/api/admin/users/update-status",pathname:"/api/admin/users/update-status",bundlePath:"",filename:""},userland:o})},3808:(e,s,n)=>{n.d(s,{Z:()=>i});var o=n(1185),r=n.n(o);let t=process.env.MONGODB_URI||"mongodb://localhost:27017/divine_acres";if(!t)throw Error("⛔ MONGODB_URI is missing in environment variables");let a=global.mongoose;async function dbConnect(){return a.conn||(a.promise||(a.promise=r().connect(t,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(e=>(console.log("✅ MongoDB Connected"),e)).catch(e=>{console.error("❌ MongoDB Connection Error:",e)})),a.conn=await a.promise),a.conn}a||(a=global.mongoose={conn:null,promise:null});let i=dbConnect}};var s=require("../../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),n=s.X(0,[4222,6565],()=>__webpack_exec__(5860));module.exports=n})();
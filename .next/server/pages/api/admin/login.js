"use strict";(()=>{var e={};e.id=6679,e.ids=[6679],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},2257:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{config:()=>d,default:()=>c,routeModule:()=>l});var r=a(1802),n=a(7153),i=a(6249),o=a(8264),u=e([o]);o=(u.then?(await u)():u)[0];let c=(0,i.l)(o,"default"),d=(0,i.l)(o,"config"),l=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/admin/login",pathname:"/api/admin/login",bundlePath:"",filename:""},userland:o});t()}catch(e){t(e)}})},8264:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>handler});var r=a(3808),n=a(8003),i=a(7618),o=e([i]);async function handler(e,s){try{if(await (0,r.Z)(),"POST"!==e.method)return s.status(405).json({success:!1,message:"Only POST allowed"});let{email:a,password:t}=e.body;if(!a||!t)return s.status(400).json({success:!1,message:"Email and password required"});let o=await n.Z.findOne({email:a}).lean();if(!o)return s.status(401).json({success:!1,message:"Admin not found"});let u=await i.default.compare(t,o.password);if(!u)return s.status(401).json({success:!1,message:"Incorrect password"});return s.status(200).json({success:!0,message:"Login successful",token:"ADMIN_SECURE_TOKEN",admin:{id:o._id,email:o.email,name:o.name}})}catch(e){return console.error("ADMIN LOGIN ERROR:",e),s.status(500).json({success:!1,message:"Server error"})}}i=(o.then?(await o)():o)[0],t()}catch(e){t(e)}})}};var s=require("../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[4222,3638],()=>__webpack_exec__(2257));module.exports=a})();
"use strict";exports.id=3836,exports.ids=[3836],exports.modules={3836:(e,t,i)=>{i.d(t,{Z:()=>AdminGuard});var r=i(997),a=i(6689);function AdminGuard({children:e}){let[t,i]=(0,a.useState)(!0),[n,s]=(0,a.useState)(!1),[d,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),getKey=()=>{try{return sessionStorage.getItem("admin_key")||"mxNpQUAq7chKY1CBJVyOEkRgTMsbL3ferwIju0Wz"}catch(e){return"mxNpQUAq7chKY1CBJVyOEkRgTMsbL3ferwIju0Wz"}};(0,a.useEffect)(()=>{(async function(){i(!0);let e=getKey();if(!e){l(!0),i(!1);return}try{let t=await fetch("/api/admin/overview",{headers:{"x-admin-key":e}});if(t.ok){try{sessionStorage.setItem("admin_key",e)}catch(e){}s(!0)}else l(!0),sessionStorage.removeItem("admin_key")}catch(e){console.warn("Admin verify failed:",e),l(!0)}finally{i(!1)}})()},[]);let submitKey=async()=>{let e=o.trim();if(!e)return alert("Key required");i(!0);try{let t=await fetch("/api/admin/overview",{headers:{"x-admin-key":e}});t.ok?(sessionStorage.setItem("admin_key",e),s(!0),l(!1)):alert("Invalid admin key")}catch(e){alert("Network error: "+e.message)}finally{i(!1)}};return t?r.jsx("div",{style:{padding:20},children:"Checking admin accessâ€¦"}):d&&!n?(0,r.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"40px auto",border:"1px solid #eee",borderRadius:8},children:[r.jsx("h3",{children:"Admin Access Required"}),r.jsx("p",{children:"Enter admin key to continue (session will remember it):"}),r.jsx("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Enter admin key",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ddd"}}),(0,r.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>{l(!1)},style:{padding:"8px 12px"},children:"Cancel"}),r.jsx("button",{onClick:submitKey,style:{padding:"8px 12px",background:"#27457a",color:"#fff",borderRadius:6},children:"Submit"})]}),(0,r.jsxs)("p",{style:{marginTop:12,fontSize:13,color:"#777"},children:["Tip: For local dev you can keep the same value as ",r.jsx("code",{children:"NEXT_PUBLIC_ADMIN_KEY"}),"."]})]}):r.jsx(r.Fragment,{children:e})}}};